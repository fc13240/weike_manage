webpackJsonp([24],{1029:function(e,t,a){t=e.exports=a(86)(void 0),t.push([e.i,".ms-doc[data-v-5bf7b1a3]{max-width:980px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;background-color:#fff;padding:40px;color:#54667a}.ms-doc_main[data-v-5bf7b1a3]{padding:20px;border-top:1px solid #e9f1f3}.lead_out img[data-v-5bf7b1a3]{margin:0 10px -3px 0;width:16px;height:18px}.pro[data-v-5bf7b1a3]{color:#0f8edd;padding:0 10px;cursor:pointer}.proB[data-v-5bf7b1a3]{border-left:1px solid #bfbfbf;border-right:1px solid #bfbfbf}.model_name[data-v-5bf7b1a3]{width:50px;text-align:right;display:inline-block;margin-right:10px}.table_header[data-v-5bf7b1a3]{width:50%;display:inline-block;font-size:14px;line-height:40px;border:1px solid #e9f1f3;box-sizing:border-box}",""])},1063:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticStyle:{"font-size":"24px","margin-left":"20px"}},[e._v("权限管理")])],1)],1),e._v(" "),a("div",{staticClass:"ms-doc"},[a("el-button",{staticStyle:{"margin-bottom":"14px"},attrs:{type:"primary",round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加权限\n          ")]),e._v(" "),a("div",{staticClass:"ms-doc_main"},[e._m(0,!1,!1),e._v(" "),a("el-tree",{staticStyle:{"font-size":"14px"},attrs:{data:e.list,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{width:"1000px",margin:"100px auto"},attrs:{title:"添加权限",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("p",[a("span",{staticClass:"model_name"},[e._v("权限名:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:e.rule_name,callback:function(t){e.rule_name=t},expression:"rule_name"}})],1),e._v(" "),a("p",[a("span",{staticClass:"model_name"},[e._v("连接:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:e.rule_mca,callback:function(t){e.rule_mca=t},expression:"rule_mca"}}),e._v(" "),a("span",{staticStyle:{color:"#a6afbb","margin-left":"10px"}},[e._v("输入模块/控制器/方法即可")])],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.close1()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{width:"1000px",margin:"100px auto"},attrs:{title:"添加权限",visible:e.dialogVisible2,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("p",[a("span",{staticClass:"model_name"},[e._v("权限名:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("p",[a("span",{staticClass:"model_name"},[e._v("连接:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:e.mca,callback:function(t){e.mca=t},expression:"mca"}}),e._v(" "),a("span",{staticStyle:{color:"#a6afbb","margin-left":"10px"}},[e._v("输入模块/控制器/方法即可")])],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.close2()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add2()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%","text-align":"center","font-size":"0","background-color":"#f2f7f8"}},[a("div",{staticClass:"table_header"},[e._v("权限名")]),e._v(" "),a("div",{staticClass:"table_header"},[e._v("操作")])])}]}},1094:function(e,t,a){var i=a(1029);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(196)("5d802c26",i,!0)},505:function(e,t,a){a(1094);var i=a(197)(a(987),a(1063),"data-v-5bf7b1a3",null);e.exports=i.exports},987:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={components:{},data:function(){return{dialogVisible:!1,dialogVisible2:!1,list:[],defaultProps:{children:"_data",label:"title"},rule_name:"",rule_mca:"",rule_id:"",name:"",mca:"",father_id:""}},methods:{getList:function(){var e=this;this.$ajax.post("/api/Rule/index").then(function(t){"200"==t.data.code&&(e.list=t.data.data.list,console.log(e.list))},function(e){console.log(e)})},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(a){t.rule_name="",t.rule_id="",t.rule_mca="",t.name="",t.mca="",t.father_id="",e()}).catch(function(e){})},add:function(){var e=this;this.$ajax.post("/api/Rule/editRule",{rule_name:this.rule_name,rule_id:this.rule_id,rule_mca:this.rule_mca}).then(function(t){"200"==t.data.code?(e.dialogVisible=!1,e.$message({message:t.data.data.message,type:"success"}),e.rule_name="",e.rule_id="",e.rule_mca="",e.getList()):e.$message({message:t.data.error,type:"error"})},function(e){console.log(e)})},add2:function(){var e=this;this.$ajax.post("/api/Rule/addChildRule",{rule_name:this.name,rule_id:this.father_id,rule_mca:this.mca}).then(function(t){"200"==t.data.code?(e.dialogVisible2=!1,e.$message({message:t.data.data.message,type:"success"}),e.name="",e.mca="",e.father_id="",e.getList()):e.$message({message:t.data.error,type:"error"})},function(e){console.log(e)})},modify:function(){this.dialogVisible=!0},renderContent:function(e,t){var a=t.node,i=t.data,s=(t.store,this);return e("span",[e("span",a.label),e("span",{attrs:{style:"float: right; margin-right: 20px"}},[e("el-button",{attrs:{size:"mini"},on:{click:function(){s.dialogVisible2=!0,s.father_id=i.id}}},"添加子权限"),e("el-button",{attrs:{size:"mini"},on:{click:function(){var e=this;s.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$ajax.post("/api/Rule/delRule",{rule_id:i.id}).then(function(e){"200"==e.data.code?(s.dialogVisible2=!1,s.$message({message:e.data.data.message,type:"success"}),s.getList()):s.$message({message:e.data.error,type:"error"})},function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},"删除"),e("el-button",{attrs:{size:"mini"},on:{click:function(){s.dialogVisible=!0,s.rule_name=i.title,s.rule_id=i.id,s.rule_mca=i.name}}},"修改")])])},close1:function(){this.dialogVisible=!1,this.rule_name="",this.rule_id="",this.rule_mca=""},close2:function(){this.dialogVisible2=!1,this.name="",this.mca="",this.father_id=""}},mounted:function(){},created:function(){this.getList()}}}});