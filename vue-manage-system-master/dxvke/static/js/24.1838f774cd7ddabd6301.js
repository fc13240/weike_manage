webpackJsonp([24],{1029:function(t,e,a){e=t.exports=a(86)(void 0),e.push([t.i,".ms-doc[data-v-5bf7b1a3]{max-width:980px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;background-color:#fff;padding:40px;color:#54667a;margin-bottom:54px}.ms-doc_main[data-v-5bf7b1a3]{padding:20px;border-top:1px solid #e9f1f3}.lead_out img[data-v-5bf7b1a3]{margin:0 10px -3px 0;width:16px;height:18px}.pro[data-v-5bf7b1a3]{color:#0f8edd;padding:0 10px;cursor:pointer}.proB[data-v-5bf7b1a3]{border-left:1px solid #bfbfbf;border-right:1px solid #bfbfbf}.model_name[data-v-5bf7b1a3]{width:50px;text-align:right;display:inline-block;margin-right:10px}.table_header[data-v-5bf7b1a3]{width:50%;display:inline-block;font-size:14px;line-height:40px;border:1px solid #e9f1f3;box-sizing:border-box}",""])},1063:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticStyle:{"font-size":"24px","margin-left":"20px"}},[t._v("权限管理")])],1)],1),t._v(" "),a("div",{staticClass:"ms-doc"},[a("el-button",{staticStyle:{"margin-bottom":"14px"},attrs:{type:"primary",round:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加权限\n          ")]),t._v(" "),a("div",{staticClass:"ms-doc_main"},[t._m(0,!1,!1),t._v(" "),a("el-tree",{staticStyle:{"font-size":"14px"},attrs:{data:t.list,props:t.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent}})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{width:"1000px",margin:"100px auto"},attrs:{title:"添加权限",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("p",[a("span",{staticClass:"model_name"},[t._v("权限名:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:t.rule_name,callback:function(e){t.rule_name=e},expression:"rule_name"}})],1),t._v(" "),a("p",[a("span",{staticClass:"model_name"},[t._v("连接:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:t.rule_mca,callback:function(e){t.rule_mca=e},expression:"rule_mca"}}),t._v(" "),a("span",{staticStyle:{color:"#a6afbb","margin-left":"10px"}},[t._v("输入模块/控制器/方法即可")])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.close1()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticStyle:{width:"1000px",margin:"100px auto"},attrs:{title:"添加权限",visible:t.dialogVisible2,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",[a("p",[a("span",{staticClass:"model_name"},[t._v("权限名:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("p",[a("span",{staticClass:"model_name"},[t._v("连接:")]),a("el-input",{staticStyle:{width:"150px",margin:"10px 0 20px"},model:{value:t.mca,callback:function(e){t.mca=e},expression:"mca"}}),t._v(" "),a("span",{staticStyle:{color:"#a6afbb","margin-left":"10px"}},[t._v("输入模块/控制器/方法即可")])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.close2()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add2()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%","text-align":"center","font-size":"0","background-color":"#f2f7f8"}},[a("div",{staticClass:"table_header"},[t._v("权限名")]),t._v(" "),a("div",{staticClass:"table_header"},[t._v("操作")])])}]}},1094:function(t,e,a){var i=a(1029);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(196)("5d802c26",i,!0)},505:function(t,e,a){a(1094);var i=a(197)(a(987),a(1063),"data-v-5bf7b1a3",null);t.exports=i.exports},987:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={components:{},data:function(){return{dialogVisible:!1,dialogVisible2:!1,list:[],defaultProps:{children:"_data",label:"title"},rule_name:"",rule_mca:"",rule_id:"",name:"",mca:"",father_id:""}},methods:{getList:function(){var t=this;this.$ajax.post("/api/Rule/index").then(function(e){"200"==e.data.code&&(t.list=e.data.data.list,console.log(t.list))},function(t){console.log(t)})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.rule_name="",e.rule_id="",e.rule_mca="",e.name="",e.mca="",e.father_id="",t()}).catch(function(t){})},add:function(){var t=this;this.$ajax.post("/api/Rule/editRule",{rule_name:this.rule_name,rule_id:this.rule_id,rule_mca:this.rule_mca}).then(function(e){"200"==e.data.code?(t.dialogVisible=!1,t.$message({message:e.data.data.message,type:"success"}),t.rule_name="",t.rule_id="",t.rule_mca="",t.getList()):t.$message({message:e.data.error,type:"error"})},function(t){console.log(t)})},add2:function(){var t=this;this.$ajax.post("/api/Rule/addChildRule",{rule_name:this.name,rule_id:this.father_id,rule_mca:this.mca}).then(function(e){"200"==e.data.code?(t.dialogVisible2=!1,t.$message({message:e.data.data.message,type:"success"}),t.name="",t.mca="",t.father_id="",t.getList()):t.$message({message:e.data.error,type:"error"})},function(t){console.log(t)})},modify:function(){this.dialogVisible=!0},renderContent:function(t,e){var a=e.node,i=e.data,n=(e.store,this);return t("span",[t("span",a.label),t("span",{attrs:{style:"float: right; margin-right: 20px"}},[t("el-button",{attrs:{size:"mini"},on:{click:function(){n.dialogVisible2=!0,n.father_id=i.id}}},"添加子权限"),t("el-button",{attrs:{size:"mini"},on:{click:function(){var t=this;n.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$ajax.post("/api/Rule/delRule",{rule_id:i.id}).then(function(t){"200"==t.data.code?(n.dialogVisible2=!1,n.$message({message:t.data.data.message,type:"success"}),n.getList()):n.$message({message:t.data.error,type:"error"})},function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},"删除"),t("el-button",{attrs:{size:"mini"},on:{click:function(){n.dialogVisible=!0,n.rule_name=i.title,n.rule_id=i.id,n.rule_mca=i.name}}},"修改")])])},close1:function(){this.dialogVisible=!1,this.rule_name="",this.rule_id="",this.rule_mca=""},close2:function(){this.dialogVisible2=!1,this.name="",this.mca="",this.father_id=""}},mounted:function(){},created:function(){this.getList()}}}});